services:
  # Backend Service
  - type: web
    name: movie-backend
    env: node
    branch: main
    rootDir: backend
    buildCommand: |
      npm install
      pip3 install -r ../Model/artifacts/requirements.txt
    startCommand: "node server.js"
    plan: free
    buildFilter:
      paths:
        - backend/**
        - Model/**

  # Frontend Service (Static)
  - type: web
    name: movie-frontend
    env: static
    branch: main
    rootDir: client
    buildCommand: "npm install && npm run build"
    staticPublishPath: "dist"
    plan: free
    buildFilter:
      paths:
        - client/**
